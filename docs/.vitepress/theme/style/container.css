:root {
  --custom-block-info-left: #626262;
  --custom-block-info-bg: #fafafa;
  --custom-block-tip-left: #009400;
  --custom-block-tip-bg: #e6f6e6;
  --custom-block-warning-left: #e6a700;
  --custom-block-warning-bg: #fff8e6;
  --custom-block-danger-left: #e13238;
  --custom-block-danger-bg: #ffebec;
  --custom-block-note-left: #4cb3d4;
  --custom-block-note-bg: #eef9fd;
  --custom-block-important-left: #a371f7;
  --custom-block-important-bg: #f4eefe;
  --custom-block-caution-left: #e69200;
  --custom-block-caution-bg: #fff3e6;
}

.dark {
  --custom-block-info-left: #cccccc;
  --custom-block-info-bg: #474748;
  --custom-block-tip-left: #31a431;
  --custom-block-tip-bg: #003100;
  --custom-block-warning-left: #e6a700;
  --custom-block-warning-bg: #4d3800;
  --custom-block-danger-left: #e13238;
  --custom-block-danger-bg: #4b1113;
  --custom-block-note-left: #4cb3d4;
  --custom-block-note-bg: #193c47;
  --custom-block-important-left: #a371f7;
  --custom-block-important-bg: #230555;
  --custom-block-caution-left: #e69200;
  --custom-block-caution-bg: #4d2a00;
}

/* --- 容器基础样式 (为所有容器设置通用样式) --- */
.custom-block {
  border-left-width: 8px;
  border-left-style: solid;
  border-right-width: 8px;
  border-right-style: solid;
  padding: 6px 8px 8px 14px !important;
  position: relative;
  overflow: hidden;
}

.custom-block-title {
  font-size: 16px;
  margin-bottom: -8px !important;
}

/* --- 图标通用基础样式 (关键部分) --- */
.custom-block [class*="custom-block-title"]::before {
  content: "";
  width: 20px;
  height: 20px;
  display: inline-block;
  vertical-align: middle;
  position: relative;
  margin-right: 4px;
  left: -4px;
  top: -2px; /* 统一垂直对齐 */

  /* 使用 MASK 技术 */
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
  /* background-color 将在下面为每个容器单独指定 */
}

.custom-block::after {
  content: "";
  position: absolute;
  right: 4px;   /* 控制水平位置 */
  bottom: -12px;  /* 控制垂直位置 */
  width: 64px;  /* 背景图宽度 */
  height:64px; /* 背景图高度 */
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  opacity: 0.03; /* 透明度，避免喧宾夺主 */
  pointer-events: none; /* 不阻挡交互 */
}

.dark .custom-block::after {
  background-image: url("/logo-dark.svg");
}

/* --- 为每种容器指定边框颜色、背景色和图标 --- */

/* 1. Info */
.custom-block.info {
  border-color: var(--custom-block-info-left);
  background-color: var(--custom-block-info-bg);
}
.custom-block.info [class*="custom-block-title"]::before {
  background-color: var(--custom-block-info-left);
  mask-image: url("/icons/custom-block.info.svg");
}
.custom-block.info::after {
  background-image: url("/icons/custom-block.info.svg");
}

/* 2. Tip */
.custom-block.tip {
  border-color: var(--custom-block-tip-left);
  background-color: var(--custom-block-tip-bg);
}
.custom-block.tip [class*="custom-block-title"]::before {
  background-color: var(--custom-block-tip-left);
  mask-image: url("/icons/custom-block.tip.svg");
}
.custom-block.tip::after {
  background-image: url("/icons/custom-block.tip.svg");
}

/* 3. Warning */
.custom-block.warning {
  border-color: var(--custom-block-warning-left);
  background-color: var(--custom-block-warning-bg);
}
.custom-block.warning [class*="custom-block-title"]::before {
  background-color: var(--custom-block-warning-left);
  mask-image: url("/icons/custom-block.warning.svg");
}
.custom-block.warning::after {
  background-image: url("/icons/custom-block.warning.svg");
}

/* 4. Danger */
.custom-block.danger {
  border-color: var(--custom-block-danger-left);
  background-color: var(--custom-block-danger-bg);
}
.custom-block.danger [class*="custom-block-title"]::before {
  background-color: var(--custom-block-danger-left);
  mask-image: url("/icons/custom-block.danger.svg");
}
.custom-block.danger::after {
  background-image: url("/icons/custom-block.danger.svg");
}

/* 5. Note */
.custom-block.note {
  border-color: var(--custom-block-note-left);
  background-color: var(--custom-block-note-bg);
}
.custom-block.note [class*="custom-block-title"]::before {
  background-color: var(--custom-block-note-left);
  mask-image: url("/icons/custom-block.note.svg");
}
.custom-block.note::after {
  background-image: url("/icons/custom-block.note.svg");
}

/* 6. Important */
.custom-block.important {
  border-color: var(--custom-block-important-left);
  background-color: var(--custom-block-important-bg);
}
.custom-block.important [class*="custom-block-title"]::before {
  background-color: var(--custom-block-important-left);
  mask-image: url("/icons/custom-block.important.svg");
}
.custom-block.important::after {
  background-image: url("/icons/custom-block.important.svg");
}

/* 7. Caution */
.custom-block.caution {
  border-color: var(--custom-block-caution-left);
  background-color: var(--custom-block-caution-bg);
}
.custom-block.caution [class*="custom-block-title"]::before {
  background-color: var(--custom-block-caution-left);
  /* 确保这里的 SVG Data URL 已经移除了 fill 属性！ */
  mask-image: url("/icons/custom-block.caution.svg");
}
.custom-block.caution::after {
  background-image: url("/icons/custom-block.caution.svg");
}

.vp-doc .custom-block > :last-child {
  margin-bottom: 0;
}